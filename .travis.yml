language: cpp

sudo: false
dist: trusty

env:
  global:
    - OMP_NUM_THREADS=4
    - GLOBAL_CFLAGS="-std=c++11 -Iinclude -fPIC"
  matrix:
    - MY_CXX="g++"     CFLAGS="-O3"
#    - MY_CXX="g++"     CFLAGS="-O3 -march=native -ffast-math"
#    - MY_CXX="g++"     CFLAGS="-O3 -march=native -ffast-math -DNDEBUG"
#    - MY_CXX="g++"     CFLAGS="-O3 -march=native -ffast-math -DNDEBUG -DROUTING_KIT_NO_GCC_EXTENSIONS -DROUTING_KIT_NO_POSIX"
    - MY_CXX="clang++" CFLAGS="-O3"
#    - MY_CXX="clang++" CFLAGS="-O3 -march=native -ffast-math"
#    - MY_CXX="clang++" CFLAGS="-O3 -march=native -ffast-math -DNDEBUG"
#    - MY_CXX="clang++" CFLAGS="-O3 -march=native -ffast-math -DNDEBUG -DROUTING_KIT_NO_GCC_EXTENSIONS -DROUTING_KIT_NO_POSIX"

before_script:
  - $MY_CXX --version
  - make CC="$MY_CXX" CFLAGS="$GLOBAL_CFLAGS $CFLAGS" -j4

script:
  - bin/test_bit_vector
  - bin/test_buffered_asynchronous_reader

